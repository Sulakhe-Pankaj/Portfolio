{% include 'user/navbar.html' %}

<div class="section-padding" style="min-height: 80vh;">
   <div class="container">

      <div class="text-center mb-5">
         <h1 class="section-title mb-3">My <span>Projects</span></h1>
         <p class="text-muted max-w-2xl mx-auto" style="max-width: 600px; margin: 0 auto;">
            A selection of my recent work. These projects demonstrate my expertise in building functional, aesthetic,
            and performant web applications.
         </p>
         <div class="mt-4">
            {% if admin_id and admin_id == active_profile_id %}
            <a href="{% url 'add_project_user' %}" class="btn-premium">Add New Project</a>
            {% endif %}
         </div>
      </div>

      <div class="row">
         {% for p in project_data %}
         <div class="col-lg-4 col-md-6 mb-5">
            <div class="project-card" style="margin-bottom: 15px;">
               <img src="/{{ p.project_image }}" alt="Project" class="project-img" style="height: 300px;">
               <div class="project-overlay"
                  style="flex-direction: column; align-items: stretch; justify-content: flex-end; padding: 20px;">

                  {% if admin_id and admin_id == active_profile_id %}
                  <div class="d-flex justify-content-between mb-3 w-100">
                     <a href="{{ p.project_link }}" class="btn-premium btn-sm flex-grow-1 text-center mr-2"
                        style="padding: 10px 0;">Live Demo</a>
                     <a href="{% url 'update_project_user' p.id %}"
                        class="btn-outline-premium btn-sm flex-grow-1 text-center" style="padding: 10px 0;">Edit</a>
                  </div>
                  <a href="{% url 'delete_project_user' p.id %}" class="btn-danger-outline btn-sm w-100 text-center"
                     style="padding: 8px 0; border-radius: 30px; transition: 0.3s;"
                     onclick="return confirm('Are you sure you want to delete this project?');">Delete</a>
                  {% else %}
                  <div class="d-flex w-100">
                     <a href="{{ p.project_link }}" class="btn-premium btn-sm w-100 text-center"
                        style="padding: 10px 0;">Live Demo</a>
                  </div>
                  {% endif %}

               </div>
            </div>
         </div>
         {% empty %}
         <div class="col-12 py-5 text-center">
            <div class="premium-card d-inline-block text-center" style="max-width: 400px; border-style: dashed;">
               <i class="fa fa-folder-open text-muted mb-3" style="font-size: 3rem;"></i>
               <h4 class="text-white">No Projects Yet</h4>
               <p class="text-muted">You haven't added any projects to your portfolio.</p>
            </div>
         </div>
         {% endfor %}
      </div>

   </div>
</div>

{% include 'user/footer.html' %}